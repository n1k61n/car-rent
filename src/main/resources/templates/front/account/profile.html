<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{front/account/user-layout}">

<head>
    <title th:text="#{user.profile.title}">My Profile</title>
</head>

<body>

<div layout:fragment="content">

    <!-- PAGE HEADER -->
    <div class="mb-4">
        <h2 th:text="#{user.profile.info_title}">Profile Information</h2>
        <p class="text-muted" th:text="#{user.profile.info_desc}">
            You can update your personal information here
        </p>
    </div>

    <div class="row g-4">

        <!-- LEFT : USER CARD -->
        <div class="col-lg-4">
            <div class="card shadow-sm text-center p-4">

                <div class="display-4 text-primary mb-2">
                    <i class="bi bi-person-circle"></i>
                </div>

                <h4 th:text="${user.firstName + ' ' + user.lastName}">
                    Ad Soyad
                </h4>

                <span class="badge bg-primary mb-3"
                      th:text="${user.role}">
                    USER
                </span>

                <hr>

                <p class="mb-1">
                    <strong th:text="#{user.profile.email}">Email:</strong>
                    <span th:text="${user.email}">email@mail.com</span>
                </p>

                <p class="mb-0">
                    <strong th:text="#{user.profile.phone_label}">Phone:</strong>
                    <span th:text="${user.phoneNumber}">
                        +994 xx xxx xx xx
                    </span>
                </p>

            </div>
        </div>

        <!-- RIGHT : UPDATE FORM -->
        <div class="col-lg-8">
            <div class="card shadow-sm p-4">

                <h4 class="mb-3" th:text="#{user.profile.update_info}">Update Information</h4>

                <!-- SUCCESS / ERROR -->
                <div th:if="${message}" class="alert alert-success"
                     th:text="${message}"></div>

                <div th:if="${error}" class="alert alert-danger"
                     th:text="${error}"></div>

                <form th:action="@{/profile/update}"
                      th:object="${userProfileUpdateDto}"
                      method="post">

                    <div class="row g-3">

                        <div class="col-md-6">
                            <label class="form-label" th:text="#{user.profile.first_name}">First Name</label>
                            <input type="text" class="form-control"
                                   th:field="*{firstName}">
                            <small class="text-danger"
                                   th:if="${#fields.hasErrors('firstName')}"
                                   th:errors="*{firstName}"></small>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label" th:text="#{user.profile.last_name}">Last Name</label>
                            <input type="text" class="form-control"
                                   th:field="*{lastName}">
                            <small class="text-danger"
                                   th:if="${#fields.hasErrors('lastName')}"
                                   th:errors="*{lastName}"></small>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label" th:text="#{user.profile.phone}">Phone</label>
                            <input type="text" class="form-control"
                                   th:field="*{phoneNumber}">
                            <small class="text-danger"
                                   th:if="${#fields.hasErrors('phoneNumber')}"
                                   th:errors="*{phoneNumber}"></small>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label">
                                <span th:text="#{user.profile.new_password}">New Password</span>
                                <span class="text-muted" th:text="#{user.profile.new_password_hint}">(leave blank if you don't want to change)</span>
                            </label>
                            <input type="password" class="form-control"
                                   th:field="*{password}">
                            <small class="text-danger"
                                   th:if="${#fields.hasErrors('password')}"
                                   th:errors="*{password}"></small>
                        </div>

                    </div>

                    <div class="mt-4 text-end">
                        <button class="btn btn-primary px-4" th:text="#{user.profile.save_changes}">
                            Save Changes
                        </button>
                    </div>

                </form>

            </div>
        </div>

    </div>

</div>

</body>
</html>